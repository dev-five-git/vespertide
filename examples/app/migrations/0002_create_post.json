{
  "$schema": "https://raw.githubusercontent.com/dev-five-git/vespertide/refs/heads/main/schemas/migration.schema.json",
  "actions": [
    {
      "column": "aa",
      "table": "user",
      "type": "DeleteColumn"
    },
    {
      "column": {
        "comment": null,
        "default": null,
        "foreign_key": null,
        "index": null,
        "name": "id",
        "nullable": false,
        "primary_key": true,
        "type": "Integer",
        "unique": null
      },
      "fill_with": "1",
      "table": "user",
      "type": "AddColumn"
    },
    {
      "column": {
        "comment": null,
        "default": null,
        "foreign_key": null,
        "index": null,
        "name": "name",
        "nullable": false,
        "primary_key": null,
        "type": "Text",
        "unique": null
      },
      "fill_with": "John Doe",
      "table": "user",
      "type": "AddColumn"
    },
    {
      "column": {
        "comment": null,
        "default": null,
        "foreign_key": null,
        "index": null,
        "name": "email",
        "nullable": false,
        "primary_key": null,
        "type": "Text",
        "unique": true
      },
      "fill_with": "john.doe@example.com",
      "table": "user",
      "type": "AddColumn"
    },
    {
      "constraint": {
        "columns": [
          "id"
        ],
        "type": "primary_key"
      },
      "table": "user",
      "type": "AddConstraint"
    },
    {
      "constraint": {
        "columns": [
          "email"
        ],
        "name": null,
        "type": "unique"
      },
      "table": "user",
      "type": "AddConstraint"
    },
    {
      "columns": [
        {
          "comment": null,
          "default": null,
          "foreign_key": null,
          "index": null,
          "name": "id",
          "nullable": false,
          "primary_key": true,
          "type": "Integer",
          "unique": null
        },
        {
          "comment": null,
          "default": null,
          "foreign_key": null,
          "index": null,
          "name": "title",
          "nullable": false,
          "primary_key": null,
          "type": "Text",
          "unique": null
        },
        {
          "comment": null,
          "default": null,
          "foreign_key": null,
          "index": null,
          "name": "content",
          "nullable": false,
          "primary_key": null,
          "type": "Text",
          "unique": null
        },
        {
          "comment": null,
          "default": null,
          "foreign_key": null,
          "index": null,
          "name": "created_at",
          "nullable": false,
          "primary_key": null,
          "type": "Timestamp",
          "unique": null
        },
        {
          "comment": null,
          "default": null,
          "foreign_key": null,
          "index": null,
          "name": "updated_at",
          "nullable": true,
          "primary_key": null,
          "type": "Timestamp",
          "unique": null
        },
        {
          "comment": null,
          "default": null,
          "foreign_key": {
            "on_delete": null,
            "on_update": null,
            "ref_columns": [
              "id"
            ],
            "ref_table": "user"
          },
          "index": true,
          "name": "user_id",
          "nullable": false,
          "primary_key": null,
          "type": "Integer",
          "unique": null
        }
      ],
      "constraints": [
        {
          "columns": [
            "id"
          ],
          "type": "primary_key"
        },
        {
          "columns": [
            "user_id"
          ],
          "name": null,
          "on_delete": null,
          "on_update": null,
          "ref_columns": [
            "id"
          ],
          "ref_table": "user",
          "type": "foreign_key"
        }
      ],
      "table": "post",
      "type": "CreateTable"
    },
    {
      "index": {
        "columns": [
          "user_id"
        ],
        "name": "idx_post_user_id",
        "unique": false
      },
      "table": "post",
      "type": "AddIndex"
    }
  ],
  "comment": "Create post",
  "created_at": "2025-12-12T18:17:30Z",
  "version": 2
}